<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Goasis Sanctum</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
        #force-audio-layer {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 999999; background: rgba(0,0,0,0.9);
            display: flex; justify-content: center; align-items: center;
        }
        #big-btn {
            padding: 25px 40px; font-size: 18px; background: #00fff2; color: #000;
            border: none; border-radius: 50px; font-family: monospace; font-weight: bold;
            box-shadow: 0 0 20px #00fff2; cursor: pointer;
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden; background: #000;">

    <div id="force-audio-layer" onclick="activateEverything()">
        <button id="big-btn">ENTER SANCTUM</button>
    </div>

    <a-scene background="color: #050505">
        <a-torus id="ring" position="0 2.5 -10" radius="5" tube="0.15" color="#00fff2" 
                 animation="property: rotation; to: 0 360 360; loop: true; dur: 12000; easing: linear">
        </a-torus>
        <a-grid material="color: #00fff2; opacity: 0.2; transparent: true;"></a-grid>
        <a-camera look-controls wasd-controls position="0 1.6 0">
            <a-cursor color="#00fff2"></a-cursor>
        </a-camera>
        <a-light type="ambient" intensity="0.8"></a-light>
    </a-scene>

    <script>
        function activateEverything() {
            // STEP 1: IMMEDIATELY KILL THE BLACK SCREEN
            document.getElementById('force-audio-layer').style.display = 'none';

            // STEP 2: START AUDIO ENGINE
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                const ctx = new AudioContext();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                
                osc.type = 'sine';
                osc.frequency.setValueAtTime(880, ctx.currentTime); 
                gain.gain.setValueAtTime(0.2, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
                
                osc.connect(gain);
                gain.connect(ctx.destination);
                
                ctx.resume().then(() => {
                    osc.start();
                    osc.stop(ctx.currentTime + 0.4);
                });
            } catch (e) { console.log("Audio Skip"); }

            // STEP 3: TRY SPEECH (OPTIONAL)
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel(); // Clear queue
                const msg = new SpeechSynthesisUtterance("Welcome home.");
                msg.rate = 0.9;
                window.speechSynthesis.speak(msg);
            }
        }
    </script>
</body>
</html>
